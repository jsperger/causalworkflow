% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cv-tmle.R
\name{cv_tmle}
\alias{cv_tmle}
\title{Estimate the value of a dynamic treatment regime using CV-TMLE}
\usage{
cv_tmle(
  data,
  resamples,
  stages,
  actions,
  outcome,
  inner_v = 5,
  lower_bound = 0.025,
  ...
)
}
\arguments{
\item{data}{A \code{data.frame} containing the observational data.}

\item{resamples}{An \code{rsample} object for K-fold cross-validation.}

\item{stages}{A named list of \code{causal_workflow} objects, one for each stage.}

\item{actions}{A character vector of the column names for the treatment
variables at each stage.}

\item{outcome}{A character string of the column name for the final outcome.}

\item{inner_v}{The number of folds for the inner resampling loop used for
tuning or ensembling.}

\item{lower_bound}{A small numeric value to truncate propensity scores,
preventing numerical instability.}

\item{...}{Additional arguments passed to underlying fitting functions.}
}
\value{
A \code{cv_tmle_fit} object.
}
\description{
\code{cv_tmle()} implements the Cross-Validated Targeted Maximum Likelihood
Estimator (CV-TMLE) for the value of an estimated two-stage optimal
Dynamic Treatment Regime (DTR).
}
\details{
This function performs K-fold cross-validation to estimate the value of a
DTR. The process involves:
\enumerate{
\item \strong{Initial Nuisance Estimation}: Within each training fold, it fits
stage-specific models for the Q-functions (outcome models) and
propensity scores (treatment models) using the provided \code{causal_workflow}
objects. This step uses nested resampling to tune or ensemble the models.
\item \strong{DTR Estimation}: The fitted Q-models are used to derive an estimate
of the optimal DTR for that fold.
\item \strong{Targeting (Fluctuation)}: On the corresponding validation fold, the
initial Q-function estimates are updated (fluctuated) sequentially,
using "clever covariates" derived from the propensity scores and the
estimated DTR. This step aims to reduce bias in the final estimate.
\item \strong{Pooling and Inference}: The targeted estimates from all folds are
pooled to compute the final CV-TMLE point estimate. Inference is based
on the empirical variance of the estimated influence curve (IC).
}
}
